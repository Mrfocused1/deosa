<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="images/logo-light.svg">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Venues | De'Osa Catering &amp; Events</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400&family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cream: '#FDFBF7', charcoal: '#1C1C1C',
                        gold: '#C5A059', 'gold-light': '#E8D3A2', sand: '#F4F1EA'
                    },
                    fontFamily: {
                        serif: ['"Cormorant Garamond"', 'serif'],
                        sans:  ['Montserrat', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <style>
        :root { --cream:#FDFBF7; --charcoal:#1C1C1C; --gold:#C5A059; }
        body { background:var(--cream); color:var(--charcoal); -webkit-font-smoothing:antialiased; overflow-x:hidden; }
        ::-webkit-scrollbar { display:none; } * { scrollbar-width:none; }

        /* ── Venue list panel ── */
        .venue-panel {
            height: calc(100vh - 80px);
            position: sticky;
            top: 80px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        #list-desk {
            overflow-y: auto;
            flex: 1;
        }
        .venue-card {
            padding: 1rem 1.75rem;
            border-bottom: 1px solid rgba(28,28,28,0.07);
            border-left: 3px solid transparent;
            cursor: pointer;
            transition: background 0.18s, border-color 0.18s;
        }
        .venue-card:hover  { background: #F4F1EA; }
        .venue-card.active { border-left-color: #C5A059; background: rgba(197,160,89,0.06); }

        /* ── Search ── */
        .vs-input {
            width: 100%; border: none; border-bottom: 1px solid rgba(28,28,28,0.15);
            padding: .7rem 0; background: transparent;
            font-family: 'Cormorant Garamond', serif; font-size: 1.1rem; color: #1C1C1C; outline: none;
        }
        .vs-input::placeholder { color: rgba(28,28,28,.35); }
        .vs-input:focus { border-bottom-color: #C5A059; }

        /* ── Map containers ── */
        #map-desktop {
            width: 100%; height: calc(100vh - 80px);
            position: sticky; top: 80px;
        }
        #map-mobile { width: 100%; height: 50vh; }


        /* ── Leaflet overrides ── */
        .leaflet-popup-content-wrapper { padding: 0 !important; border-radius: 0 !important; box-shadow: 0 4px 24px rgba(28,28,28,0.12) !important; }
        .leaflet-popup-content { margin: 0 !important; }
        .leaflet-popup-tip-container { display: none !important; }
        .leaflet-control-attribution { font-size: 9px !important; background: rgba(253,251,247,0.8) !important; }
        /* Warm tile tint to match cream palette */
        #map-desktop .leaflet-tile-pane,
        #map-mobile  .leaflet-tile-pane { filter: sepia(15%) saturate(0.85) brightness(1.04); }

        /* ── Fade-up animation ── */
        .fade-up { opacity: 0; transform: translateY(24px); transition: opacity .7s ease, transform .7s ease; }
        .fade-up.visible { opacity: 1; transform: none; }

        /* Hero gold line */
        .gold-rule { display:block; width:80px; height:1px; background:#C5A059; margin: 1.25rem 0; }

        /* Active nav item */
        nav a.nav-current { color: #C5A059 !important; }
    </style>
</head>
<body class="selection:bg-gold selection:text-white">

<!-- ── Progress bar ── -->
<div id="progress-bar" class="fixed top-0 left-0 h-[2px] bg-gold z-50 origin-left scale-x-0 w-full will-change-transform"></div>

<!-- ══════════════════════════════════════════
     NAVIGATION
══════════════════════════════════════════ -->
<nav class="fixed top-0 w-full z-40 transition-all duration-500 py-5 px-8 flex justify-between items-center bg-charcoal/95 backdrop-blur-md border-b border-cream/5" id="navbar">
    <a href="index.html"><img decoding="async" src="images/logo-dark-bg.svg" class="h-9 w-auto" alt="De'Osa"></a>
    <div class="hidden md:flex gap-8 font-sans text-sm tracking-widest uppercase text-cream/80">
        <a href="index.html"    class="hover:text-gold transition-colors">Home</a>
        <a href="catering.html" class="hover:text-gold transition-colors">Catering</a>
        <a href="story.html"    class="hover:text-gold transition-colors">About</a>
        <a href="venues.html"   class="nav-current">Venues</a>
        <a href="gallery.html"  class="hover:text-gold transition-colors">Gallery</a>
        <a href="contact.html"  class="hover:text-gold transition-colors">Contact</a>
        <a href="login.html"    class="hover:text-gold transition-colors">Login</a>
    </div>
    <button onclick="toggleMobileMenu()" class="md:hidden font-sans text-sm tracking-widest uppercase text-cream">Menu</button>
</nav>

<!-- ── Mobile Menu ── -->
<div id="mobile-menu" class="fixed inset-0 z-50 flex flex-col transition-all duration-500 opacity-0 pointer-events-none overflow-hidden" style="background:#1C1C1C">
    <div class="absolute top-0 left-0 right-0 h-px" style="background:linear-gradient(to right,transparent,#C5A059,transparent)"></div>
    <div class="relative z-10 flex justify-between items-center px-6 py-6" style="border-bottom:1px solid rgba(253,251,247,0.06)">
        <a href="index.html"><img decoding="async" src="images/logo-dark-bg.svg" class="h-9 w-auto" alt="De'Osa"></a>
        <button onclick="toggleMobileMenu()" class="w-10 h-10 flex items-center justify-center rounded-sm" style="border:1px solid rgba(253,251,247,0.12);color:rgba(253,251,247,0.5)">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
        </button>
    </div>
    <div class="relative z-10 flex flex-col px-6 pt-10 flex-1">
        <p class="font-sans text-xs font-bold tracking-[0.3em] uppercase mb-8" style="color:#C5A059">Navigation</p>
        <a href="index.html"    class="group flex items-center justify-between py-5" style="border-bottom:1px solid rgba(253,251,247,0.07)"><span class="font-serif text-3xl" style="color:rgba(253,251,247,0.9)">Home</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color:rgba(253,251,247,0.2)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/></svg></a>
        <a href="catering.html" class="group flex items-center justify-between py-5" style="border-bottom:1px solid rgba(253,251,247,0.07)"><span class="font-serif text-3xl" style="color:rgba(253,251,247,0.9)">Catering</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color:rgba(253,251,247,0.2)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/></svg></a>
        <a href="story.html"    class="group flex items-center justify-between py-5" style="border-bottom:1px solid rgba(253,251,247,0.07)"><span class="font-serif text-3xl" style="color:rgba(253,251,247,0.9)">About</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color:rgba(253,251,247,0.2)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/></svg></a>
        <a href="venues.html"   class="group flex items-center justify-between py-5" style="border-bottom:1px solid rgba(253,251,247,0.07)"><span class="font-serif text-3xl" style="color:#C5A059">Venues</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color:rgba(253,251,247,0.2)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/></svg></a>
        <a href="gallery.html"  class="group flex items-center justify-between py-5" style="border-bottom:1px solid rgba(253,251,247,0.07)"><span class="font-serif text-3xl" style="color:rgba(253,251,247,0.9)">Gallery</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color:rgba(253,251,247,0.2)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/></svg></a>
        <a href="contact.html"  class="group flex items-center justify-between py-5"><span class="font-serif text-3xl" style="color:rgba(253,251,247,0.9)">Contact</span><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="color:rgba(253,251,247,0.2)"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 5l7 7-7 7"/></svg></a>
    </div>
    <div class="relative z-10 px-6" style="padding-bottom:calc(2.5rem + env(safe-area-inset-bottom,0px))">
        <p class="font-sans text-xs tracking-widest uppercase" style="color:rgba(253,251,247,0.18)">Luxury African &amp; Caribbean Catering · London</p>
    </div>
</div>

<!-- ══════════════════════════════════════════
     HERO
══════════════════════════════════════════ -->
<section class="relative bg-charcoal overflow-hidden" style="padding-top:130px;padding-bottom:60px">
    <!-- Noise texture -->
    <div class="absolute inset-0 pointer-events-none opacity-40" style="background-image:url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22n%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23n)%22 opacity=%220.06%22/%3E%3C/svg%3E')"></div>
    <!-- Gold top line -->
    <div class="absolute top-0 left-0 right-0 h-px" style="background:linear-gradient(to right,transparent,#C5A059 40%,#C5A059 60%,transparent)"></div>
    <!-- Faint grid -->
    <div class="absolute inset-0 pointer-events-none opacity-[0.03]"
         style="background-image:linear-gradient(rgba(197,160,89,1) 1px,transparent 1px),linear-gradient(90deg,rgba(197,160,89,1) 1px,transparent 1px);background-size:60px 60px"></div>

    <div class="container mx-auto px-6 lg:px-16 relative z-10 max-w-7xl">
        <p class="font-sans text-[0.6rem] tracking-[0.3em] uppercase text-gold/60 mb-5 fade-up">45 Approved Venues · London &amp; South East England</p>
        <h1 class="font-serif text-6xl md:text-8xl text-cream leading-none mb-5 fade-up">Our <em>Venues</em></h1>
        <span class="gold-rule fade-up"></span>
        <p class="font-sans text-sm font-light text-cream/50 max-w-lg leading-relaxed fade-up">From Grade I listed manor houses to award-winning London hotels — every location where De'Osa delivers exceptional catering.</p>
    </div>
</section>

<!-- ══════════════════════════════════════════
     MOBILE: Map strip + search
══════════════════════════════════════════ -->
<div class="md:hidden relative bg-sand">
    <div id="map-mobile"></div>
</div>

<div class="md:hidden sticky z-30 bg-cream border-b border-charcoal/8 px-6 py-4" style="top:80px">
    <input id="search-mob" type="search" placeholder="Search venues…" class="vs-input">
    <p id="count-mob" class="font-sans text-[9px] uppercase tracking-widest text-charcoal/35 mt-2">45 venues</p>
</div>

<!-- Mobile list -->
<div class="md:hidden" id="list-mob"></div>

<!-- ══════════════════════════════════════════
     DESKTOP: Two-column layout
══════════════════════════════════════════ -->
<div class="hidden md:flex">

    <!-- Left: Venue list -->
    <div class="venue-panel bg-cream border-r border-charcoal/8" style="width:36%;min-width:300px;max-width:460px">
        <!-- Sticky search header -->
        <div class="px-8 py-6 border-b border-charcoal/8 bg-cream shrink-0">
            <input id="search-desk" type="search" placeholder="Search venues…" class="vs-input">
            <p id="count-desk" class="font-sans text-[9px] uppercase tracking-widest text-charcoal/35 mt-3">45 venues</p>
        </div>
        <div id="list-desk"></div>
    </div>

    <!-- Right: Map -->
    <div class="flex-1 relative">
        <div id="map-desktop"></div>
    </div>
</div>

<!-- ══════════════════════════════════════════
     FOOTER
══════════════════════════════════════════ -->
<footer class="bg-charcoal text-cream pb-12 pt-6 border-t border-gold/20">
    <div class="max-w-7xl mx-auto px-6 lg:px-12 text-center flex flex-col items-center">
        <img decoding="async" src="images/logo-dark-bg.svg" class="h-12 w-auto mb-6" alt="De'Osa">
        <div class="flex gap-6 mb-8 font-sans text-xs uppercase tracking-widest font-bold">
            <a href="#" class="hover:text-gold transition-colors">Instagram</a>
            <a href="#" class="hover:text-gold transition-colors">Facebook</a>
            <a href="#" class="hover:text-gold transition-colors">Pinterest</a>
        </div>
        <p class="font-sans text-[10px] tracking-widest uppercase text-cream/40">© 2026 De'Osa Catering &amp; Events. All Rights Reserved.</p>
    </div>
</footer>

<!-- ══════════════════════════════════════════
     JAVASCRIPT
══════════════════════════════════════════ -->
<script>
// ── Map tiles (OpenStreetMap via CartoDB Positron — no API key needed) ────
const TILE_URL  = 'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png';
const TILE_ATTR = '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/">CARTO</a>';

const VENUES = [
    { name: "8 Northumberland Avenue",                  lat: 51.5075,  lng: -0.1236,  area: "London WC2" },
    { name: "Battersea Arts Centre",                    lat: 51.4719,  lng: -0.1567,  area: "London SW11" },
    { name: "Beecham House",                            lat: 51.6540,  lng: -0.9820,  area: "Beaconsfield, Buckinghamshire" },
    { name: "Bexleyheath Marriott Hotel",               lat: 51.4588,  lng:  0.1388,  area: "Bexleyheath, London" },
    { name: "Boreham House",                            lat: 51.7519,  lng:  0.5310,  area: "Chelmsford, Essex" },
    { name: "Braxted Park",                             lat: 51.7885,  lng:  0.7327,  area: "Witham, Essex" },
    { name: "Brewers Hall",                             lat: 51.5168,  lng: -0.0998,  area: "London EC2" },
    { name: "Chelsea Harbour Hotel",                    lat: 51.4748,  lng: -0.1802,  area: "London SW10" },
    { name: "Chigwell Marquees",                        lat: 51.6313,  lng:  0.0729,  area: "Chigwell, Essex" },
    { name: "Churchill Hyatt Regency",                  lat: 51.5154,  lng: -0.1577,  area: "London W1" },
    { name: "De Vere Grand Connaught Rooms",            lat: 51.5131,  lng: -0.1227,  area: "London WC2" },
    { name: "DoubleTree by Hilton Dartford",            lat: 51.4464,  lng:  0.2192,  area: "Dartford, Kent" },
    { name: "DoubleTree by Hilton Ealing Common",       lat: 51.5113,  lng: -0.3061,  area: "London W5" },
    { name: "DoubleTree by Hilton Docklands Riverside", lat: 51.4956,  lng: -0.0503,  area: "London SE16" },
    { name: "Ealing Town Hall",                         lat: 51.5140,  lng: -0.3089,  area: "London W5" },
    { name: "Epsom Downs Racecourse",                   lat: 51.3296,  lng: -0.2468,  area: "Epsom, Surrey" },
    { name: "Froyle Park",                              lat: 51.1504,  lng: -1.0154,  area: "Hampshire" },
    { name: "Grand Sapphire Croydon",                   lat: 51.3754,  lng: -0.1031,  area: "Croydon, London" },
    { name: "Hunton Park",                              lat: 51.7185,  lng: -0.3752,  area: "Kings Langley, Hertfordshire" },
    { name: "Hylands House",                            lat: 51.7210,  lng:  0.4494,  area: "Chelmsford, Essex" },
    { name: "ILEC Conference Centre",                   lat: 51.4783,  lng: -0.1942,  area: "London SW6" },
    { name: "Marriott Hotel",                           lat: 51.5044,  lng: -0.1453,  area: "London W1" },
    { name: "Meridian Grand",                           lat: 51.6160,  lng: -0.0651,  area: "Edmonton, London N18" },
    { name: "Millennium Mayfair",                       lat: 51.5099,  lng: -0.1497,  area: "Mayfair, London W1" },
    { name: "North Mymms",                              lat: 51.7461,  lng: -0.2339,  area: "Hatfield, Hertfordshire" },
    { name: "Oatlands Park Hotel Weybridge",            lat: 51.3696,  lng: -0.3958,  area: "Weybridge, Surrey" },
    { name: "Old Thorns Hotel Liphook",                 lat: 51.0742,  lng: -0.7987,  area: "Liphook, Hampshire" },
    { name: "Pendley Manor Hotel",                      lat: 51.7941,  lng: -0.6354,  area: "Tring, Hertfordshire" },
    { name: "Plaisterers Hall",                         lat: 51.5170,  lng: -0.0997,  area: "London EC2" },
    { name: "Porchester Hall",                          lat: 51.5146,  lng: -0.1908,  area: "London W2" },
    { name: "Royal Garden Hotel",                       lat: 51.5026,  lng: -0.1874,  area: "Kensington, London W8" },
    { name: "Royal Horticultural Halls – Lindley Hall", lat: 51.4976,  lng: -0.1366,  area: "London SW1" },
    { name: "Selsdon Park Hotel & Golf Club",           lat: 51.3344,  lng: -0.0715,  area: "South Croydon, Surrey" },
    { name: "Shendish Manor",                           lat: 51.7207,  lng: -0.3812,  area: "Hemel Hempstead, Hertfordshire" },
    { name: "Shoreditch Town Hall",                     lat: 51.5270,  lng: -0.0800,  area: "London E1" },
    { name: "Syon Park, The Garden Room",               lat: 51.4826,  lng: -0.3112,  area: "Brentford, Middlesex" },
    { name: "The Conservatory Painshill Park",          lat: 51.3362,  lng: -0.4104,  area: "Cobham, Surrey" },
    { name: "The Jetty Greenwich",                      lat: 51.4818,  lng: -0.0098,  area: "Greenwich, London SE10" },
    { name: "The Manor at Bickley, Bromley",            lat: 51.4038,  lng:  0.0467,  area: "Bromley, London" },
    { name: "The Principality London",                  lat: 51.5194,  lng: -0.1289,  area: "London WC2" },
    { name: "The Waldorf Hilton",                       lat: 51.5128,  lng: -0.1196,  area: "Aldwych, London WC2" },
    { name: "The Willows",                              lat: 51.5750,  lng: -0.1085,  area: "London" },
    { name: "Thistle Marble Arch",                      lat: 51.5150,  lng: -0.1589,  area: "London W1" },
    { name: "Three Rivers Golf & Country Club",         lat: 51.6488,  lng: -0.4290,  area: "Rickmansworth, Hertfordshire" },
    { name: "Trinity Buoy Wharf",                       lat: 51.5072,  lng:  0.0051,  area: "London E14" },
].sort((a, b) => a.name.localeCompare(b.name));

// ── SVG marker icons ──────────────────────────────────────────────────────
const PIN = `<svg xmlns="http://www.w3.org/2000/svg" width="30" height="38" viewBox="0 0 30 38">
  <path d="M15 0C6.716 0 0 6.716 0 15c0 6.19 3.763 11.517 9.18 13.876L15 38l5.82-9.124C26.237 26.517 30 21.19 30 15 30 6.716 23.284 0 15 0z" fill="#C5A059"/>
  <circle cx="15" cy="15" r="9" fill="#1C1C1C"/>
  <text x="15" y="20" text-anchor="middle" fill="#C5A059" font-family="Cormorant Garamond,serif" font-size="12" font-weight="600">D</text>
</svg>`;

const PIN_ACTIVE = `<svg xmlns="http://www.w3.org/2000/svg" width="36" height="45" viewBox="0 0 30 38">
  <path d="M15 0C6.716 0 0 6.716 0 15c0 6.19 3.763 11.517 9.18 13.876L15 38l5.82-9.124C26.237 26.517 30 21.19 30 15 30 6.716 23.284 0 15 0z" fill="#FDFBF7" stroke="#C5A059" stroke-width="1.5"/>
  <circle cx="15" cy="15" r="9" fill="#C5A059"/>
  <text x="15" y="20" text-anchor="middle" fill="#1C1C1C" font-family="Cormorant Garamond,serif" font-size="12" font-weight="700">D</text>
</svg>`;

// ── State ─────────────────────────────────────────────────────────────────
let _mapDesk = null, _mapMob = null, _markersDesk = [], _markersMob = [], _activeIdx = -1;

// ── Leaflet helpers ────────────────────────────────────────────────────────
function makeIcon(active) {
    return L.divIcon({
        html:       active ? PIN_ACTIVE : PIN,
        className:  '',
        iconSize:   active ? [36, 45] : [30, 38],
        iconAnchor: active ? [18, 45] : [15, 38],
        popupAnchor:[0, -42],
    });
}

function createLeafletMap(elId) {
    const m = L.map(elId, { zoomControl: true, scrollWheelZoom: true });
    L.tileLayer(TILE_URL, { attribution: TILE_ATTR, maxZoom: 19 }).addTo(m);
    m.setView([51.52, -0.12], 9);
    return m;
}

function popupHtml(v) {
    return `<div style="padding:14px 18px;min-width:200px;font-family:inherit">
        <p style="font-family:Cormorant Garamond,serif;font-size:1.05rem;font-weight:500;color:#1C1C1C;margin:0 0 5px">${v.name}</p>
        <p style="font-family:Montserrat,sans-serif;font-size:9px;letter-spacing:.12em;text-transform:uppercase;color:rgba(28,28,28,.4);margin:0">${v.area}</p>
        <a href="catering.html" style="display:inline-block;margin-top:10px;font-family:Montserrat,sans-serif;font-size:9px;letter-spacing:.12em;text-transform:uppercase;color:#C5A059;text-decoration:none">Book this venue →</a>
    </div>`;
}

// ── Map initialisation ────────────────────────────────────────────────────
function initMap() {
    const elDesk = document.getElementById('map-desktop');
    const elMob  = document.getElementById('map-mobile');

    if (elDesk) {
        _mapDesk = createLeafletMap('map-desktop');
        VENUES.forEach((v, i) => {
            const m = L.marker([v.lat, v.lng], { icon: makeIcon(false) })
                .bindPopup(popupHtml(v))
                .on('click', () => activateVenue(i))
                .addTo(_mapDesk);
            _markersDesk.push(m);
        });
    }

    if (elMob) {
        _mapMob = createLeafletMap('map-mobile');
        VENUES.forEach((v, i) => {
            const m = L.marker([v.lat, v.lng], { icon: makeIcon(false) })
                .bindPopup(popupHtml(v))
                .on('click', () => activateVenue(i))
                .addTo(_mapMob);
            _markersMob.push(m);
        });
    }
}

// ── Activate a venue (from list click or map pin click) ───────────────────
function activateVenue(idx) {
    // Reset previous marker
    if (_activeIdx >= 0) {
        if (_markersDesk[_activeIdx]) _markersDesk[_activeIdx].setIcon(makeIcon(false));
        if (_markersMob[_activeIdx])  _markersMob[_activeIdx].setIcon(makeIcon(false));
    }

    _activeIdx = idx;
    const v = VENUES[idx];

    if (_markersDesk[idx]) {
        _markersDesk[idx].setIcon(makeIcon(true));
        _mapDesk.setView([v.lat, v.lng], 14);
        _markersDesk[idx].openPopup();
    }
    if (_markersMob[idx]) {
        _markersMob[idx].setIcon(makeIcon(true));
        _mapMob.setView([v.lat, v.lng], 14);
        _markersMob[idx].openPopup();
    }

    // Highlight list card
    document.querySelectorAll('.venue-card').forEach(el => {
        el.classList.toggle('active', parseInt(el.dataset.idx) === idx);
    });
    const card = document.querySelector(`.venue-card[data-idx="${idx}"]`);
    if (card) card.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}

// ── Render venue list ─────────────────────────────────────────────────────
function renderList(containerId, list) {
    const el = document.getElementById(containerId);
    if (!el) return;

    if (!list.length) {
        el.innerHTML = `<p style="padding:3rem;text-align:center;font-family:Cormorant Garamond,serif;font-size:1.25rem;color:rgba(28,28,28,.3)">No venues found</p>`;
        return;
    }

    const viewAllRow = `<div class="venue-card" onclick="viewAll()" style="border-left:3px solid transparent;background:#FDFBF7">
        <p class="font-sans text-[9px] uppercase tracking-widest text-gold">View All</p>
    </div>`;

    el.innerHTML = viewAllRow + list.map(v => {
        const i = VENUES.indexOf(v);
        return `<div class="venue-card" data-idx="${i}" onclick="activateVenue(${i})">
            <div class="flex items-start justify-between gap-3">
                <div class="min-w-0">
                    <p class="font-serif leading-snug" style="font-size:1.05rem;font-weight:500;color:#1C1C1C">${v.name}</p>
                    <p class="font-sans mt-1" style="font-size:9px;letter-spacing:.12em;text-transform:uppercase;color:rgba(28,28,28,.38)">${v.area}</p>
                </div>
                <svg class="shrink-0 mt-1" width="14" height="14" fill="none" stroke="#C5A059" stroke-opacity=".5" stroke-width="1.5" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a2 2 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0zM15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
            </div>
        </div>`;
    }).join('');
}

// ── View all (reset search + map) ─────────────────────────────────────────
function viewAll() {
    ['search-desk','search-mob'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.value = '';
    });
    filterVenues('');
    if (_activeIdx >= 0) {
        if (_markersDesk[_activeIdx]) _markersDesk[_activeIdx].setIcon(makeIcon(false));
        if (_markersMob[_activeIdx])  _markersMob[_activeIdx].setIcon(makeIcon(false));
        _activeIdx = -1;
    }
    if (_mapDesk) { _mapDesk.closePopup(); _mapDesk.setView([51.52, -0.12], 9); }
    if (_mapMob)  { _mapMob.closePopup();  _mapMob.setView([51.52, -0.12], 9); }
}

// ── Search / filter ───────────────────────────────────────────────────────
function filterVenues(q) {
    const term = q.trim().toLowerCase();
    const list = term ? VENUES.filter(v =>
        v.name.toLowerCase().includes(term) || v.area.toLowerCase().includes(term)
    ) : VENUES;

    renderList('list-desk', list);
    renderList('list-mob',  list);

    const txt = `${list.length} venue${list.length !== 1 ? 's' : ''}`;
    const dsk = document.getElementById('count-desk');
    const mob = document.getElementById('count-mob');
    if (dsk) dsk.textContent = txt;
    if (mob) mob.textContent = txt;
}

// ── Mobile menu ───────────────────────────────────────────────────────────
function toggleMobileMenu() {
    const m = document.getElementById('mobile-menu');
    const open = !m.classList.contains('pointer-events-none');
    m.classList.toggle('opacity-0',         open);
    m.classList.toggle('pointer-events-none', open);
}

// ── Boot ──────────────────────────────────────────────────────────────────
document.addEventListener('DOMContentLoaded', () => {
    // Render lists immediately
    renderList('list-desk', VENUES);
    renderList('list-mob',  VENUES);

    // Wire search inputs
    ['search-desk','search-mob'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.addEventListener('input', e => filterVenues(e.target.value));
    });

    // Fade-up hero text
    document.querySelectorAll('.fade-up').forEach((el, i) => {
        setTimeout(() => el.classList.add('visible'), 200 + i * 100);
    });

    // Initialise Leaflet map (no API key needed)
    initMap();
});


</script>
</body>
</html>
